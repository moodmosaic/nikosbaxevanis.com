<!DOCTYPE html><html><head><meta charset="utf-8" /><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /><meta content="width=device-width, user-scalable=no" name="viewport" /><title>Idioms.FsCheck</title><link href="http://fonts.googleapis.com/css?family=Lora:400,700|Open+Sans" rel="stylesheet" type="text/css" /><link href="/stylesheets/fontello.css?1402301603" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/styles.css?1402301603" media="screen" rel="stylesheet" type="text/css" /></head><body><div class="row"><h1>Idioms.FsCheck</h1><div class="post"><p>AutoFixture 3.18 introduces a new glue library called Idioms.FsCheck.</p>

<p>It uses <a href="https://github.com/fsharp/FsCheck">FsCheck</a> to implement a reusable assertion that verifies (or at least, makes probable) that a method doesn&#39;t return null:</p>
<pre class="highlight text">[Theory, UnitTestConventions]
public void Scenario(ISpecimenBuilder builder)
{
    var sut = from x in new Methods&lt;SomeClass&gt;() 
              select x.SomeMethod();
    var assertion = new ReturnValueMustNotBeNullAssertion(builder);
    Assert.Throws&lt;ReturnValueMustNotBeNullException&gt;(() =&gt; 
        assertion.Verify(sut));
}
</pre>
<p><strong>How it works</strong></p>

<p>If a method is parameterless the assertion simply exercises its return value by invoking it. Otherwise, its return value is exercised against arbitrary values generated by FsCheck.</p>

<p>An injected instance of an <code>ISpecimenBuilder</code> (e.g. a <code>Fixture</code> instance) creates instances of the type containing the method if it&#39;s declared as an instance method.</p>

<blockquote>
<p>When needed, AutoFixture and FsCheck can be customized via their DSLs.</p>
</blockquote>

<p><strong>Samples</strong></p>

<ul>
<li>Idioms.FsCheck&#39;s test suite contains <a href="https://github.com/AutoFixture/AutoFixture/blob/master/Src/Idioms.FsCheckUnitTest/ReturnValueMustNotBeNullAssertionTest.fs">examples in F#</a>.</li>
<li>The original question on Stack Overflow that triggered this feature includes <a href="http://stackoverflow.com/a/22614410/467754">examples in C#</a>.</li>
</ul>

<p><strong>Installation</strong></p>

<p>Idioms.FsCheck is <a href="http://www.nuget.org/packages/AutoFixture.Idioms.FsCheck/">available on NuGet</a>:</p>
<pre class="highlight text">PM&gt; Install-Package AutoFixture.Idioms.FsCheck
</pre></div><div class="dater">March 25, 2014</div><div class="categories">Published in<a class="category" href="/category/autofixture/">AutoFixture&nbsp;</a></div></div><div class="homer"><a href="/"><i class="icon-tape" style="font-size:32px;"></i></a></div><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-24262928-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></body></html>