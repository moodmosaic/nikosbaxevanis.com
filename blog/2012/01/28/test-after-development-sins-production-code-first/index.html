<!DOCTYPE html><html><head><meta charset="utf-8" /><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /><meta content="width=device-width, user-scalable=no" name="viewport" /><title>Test-After Development Sins (Production Code First)</title><link href="/stylesheets/styles.css?1402741299" media="screen" rel="stylesheet" type="text/css" /></head><body><div><h1>Test-After Development Sins (Production Code First)</h1><div>January 28, 2012</div><br /><div><div>
<p>A <a href="http://www.nikosbaxevanis.com/bonus-bits/2012/01/test-after-development-sins-introduction.html" target="_blank" title="&quot;Test-After Development&quot; Sins: Introduction">series</a>&#0160;of short articles exploring the impact of writing tests&#0160;<em>after&#0160;</em>the code is written&#0160;on the implementation part of&#0160;<a href="http://en.wikipedia.org/wiki/Software_development_process" target="_blank" title="A software development process, also known as a software development life cycle (SDLC), is a structure imposed on the development of a software product.">SDLC</a>.</p>
</div>

<p><span style="text-decoration: underline;">Sin No.1</span>: Production Code First.</p>

<p>By not writing tests upfront, the code becomes most of the times a <a href="http://martinfowler.com/eaaCatalog/transactionScript.html" target="_blank" title="Organizes business logic by procedures where each procedure handles a single request from the presentation.">Transaction Script</a>. It usually lives at application boundaries. If not, then it usually delegates all method arguments to a method with the same name inside a <a href="http://martinfowler.com/eaaCatalog/serviceLayer.html" target="_blank" title="Defines an application&#39;s boundary with a layer of services that establishes a set of available operations and coordinates the application&#39;s response in each operation.">Service Layer</a>.</p>

<p>Most of the times, this code is responsible for aspects such is validation and persistence violating the <a href="http://en.wikipedia.org/wiki/Single_responsibility_principle" target="_blank" title="In object-oriented programming, the single responsibility principle states that every object should have a single responsibility, and that responsibility should be entirely encapsulated by the class. All its services should be narrowly aligned with that responsibility.">SRP</a>&#0160;and likely most (if not all) of the other&#0160;<a href="http://en.wikipedia.org/wiki/SOLID_(object-oriented_design)" target="_blank" title="In computer programming, SOLID (Single responsibility, Open-closed, Liskov substitution, Interface segregation and Dependency inversion) is a mnemonic acronym introduced by Robert C. Martin in the early 2000s which stands for five basic principles of object-oriented programming and design.">principles</a> of class design.</p>

<p>Even worse, inside those methods, dependencies might be resolved using a&#0160;<a href="http://martinfowler.com/articles/injection.html#UsingAServiceLocator" target="_blank">Service Locator</a>&#0160;(which is <a href="http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx" target="_blank" title="Service Locator is an Anti-Pattern">not</a> good) forcing us to mock the container (if that&#39;s an option at all) in order to successfully write unit tests&#0160;<em>afterwards</em>.</p>

<p>At the end, a lot of time is spent to write a few&#0160;<a href="http://xunitpatterns.com/Fragile%20Test.html" target="_blank" title="A test fails to compile or run when the system under test (SUT) is changed in ways that do not affect the part the test is exercising.">Fragile Tests</a>, resulting in a system which is (in most other places) not covered by tests at all.</p>
</div><hr /><small>Published in <a href="/category/legacy-code/">Legacy Code</a>, by <a href="/">Nikos Baxevanis</a>.</small></div><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-24262928-1']);
_gaq.push(['_trackPageview']);
(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></body></html>