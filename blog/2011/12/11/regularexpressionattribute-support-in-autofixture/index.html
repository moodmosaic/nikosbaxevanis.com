<!DOCTYPE html><html><head><meta charset="utf-8" /><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /><meta content="width=device-width, user-scalable=no" name="viewport" /><title>RegularExpressionAttribute support in AutoFixture</title><link href="http://fonts.googleapis.com/css?family=Lora:400,700|Open+Sans" rel="stylesheet" type="text/css" /><link href="/stylesheets/fontello.css?1396625706" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/styles.css?1396625706" media="screen" rel="stylesheet" type="text/css" /></head><body><div class="row"><h1>RegularExpressionAttribute support in AutoFixture</h1><div class="post"><p>Continuing the support of DataAnnotations as described&nbsp;<a title="StringLengthAttribute support in AutoFixture" href="http://www.nikosbaxevanis.com/bonus-bits/2011/09/stringlengthattribute-support-in-autofixture.html" target="_blank">here</a>&nbsp;and <a title="RangeAttribute support in AutoFixture" href="http://www.nikosbaxevanis.com/bonus-bits/2011/09/rangeattribute-support-in-autofixture.html" target="_blank">here</a>, there is now added support for the&nbsp;<a title="Specifies that a data field value must match the specified regular expression." href="http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.regularexpressionattribute.aspx" target="_blank">RegularExpressionAttribute</a>&nbsp;class.</p>

<p>Starting with version 2.6.0, when this attribute is applied on a data field AutoFixture will <em>try </em>to&nbsp;generate a value that&nbsp;matches the specified regular expression.</p>

<p>Let&rsquo;s take as an example the following type:</p>
<pre class="highlight text">public class RegularExpressionValidatedType
{
    // Allow up to 40 uppercase and lowercase.
    [RegularExpression(&quot;^[a-zA-Z''-'\s]{1,40}$&quot;)]
    public string Name { get; set; }

    [RegularExpression(&quot;^http\://[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(/\S*)?$&quot;)]
    public string Url { get; set; }
}
</pre>
<p>Prior to version 2.6.0 if&nbsp;we request an anonymous instance from AutoFixture, by&nbsp;<em>default</em>&nbsp;we would get back an instance of the above type with it&rsquo;s properties containing values similar to those below.</p>

<p><img src="http://farm9.staticflickr.com/8510/8398554280_b996887d56_o.png" title="Prior verion 2.6.0" alt="Prior verion 2.6.0" /></p>

<p>However, from version 2.6.0 AutoFixture can handle requests with&nbsp;regular expressions, through the RegularExpressionAttribute class, by issuing a new request for the specified regular expression pattern.</p>

<p><img src="http://farm9.staticflickr.com/8501/8398554186_edc6990289_o.png" title="After verion 2.6.0" alt="After verion 2.6.0" /></p>

<p>The idea behind this new feature is that members of a <a title="In computing, a regular expression provides a concise and flexible means for &quot;matching&quot; (specifying and recognizing) strings of text, such as particular characters, words, or patterns of characters." href="http://en.wikipedia.org/wiki/Regular_expression" target="_blank">Regular Expression</a>&nbsp;(Regex) can be generated by first transforming the Regex into a <a title="A finite-state machine (FSM) or finite-state automaton (plural: automata), or simply a state machine, is a mathematical model used to design computer programs and digital logic circuits." href="http://en.wikipedia.org/wiki/Finite_state_machine" target="_blank">Finite-state machine</a>, particularly a&nbsp;<a title="In the theory of computation and automata theory, a deterministic finite automaton (DFA)—also known as deterministic finite state machine—is a finite state machine accepting finite strings of symbols." href="http://en.wikipedia.org/wiki/Deterministic_finite_automata" target="_blank">Deterministic finite automaton</a>.&nbsp;</p>

<p>You may also watch a short,&nbsp;introductory,&nbsp;video on the subject <a title="Symbolic Regular Expression Exploration" href="http://channel9.msdn.com/posts/Peli/Margus-Veanes-Rex-Symbolic-Regular-Expression-Exploration/" target="_blank">here</a>. (Although it is for <a title="Rex is a tool that explores .NET regexes and generates members efficiently." href="http://research.microsoft.com/en-us/projects/rex/" target="_blank">Rex</a>, I find it very descriptive.)</p>

<p>The current implementation uses internally the algorithms provided by the&nbsp;<a title="A DFA/NFA (finite-state automata) implementation with Unicode alphabet (UTF16) and support for the standard regular expression operations (concatenation, union, Kleene star) and a number of non-standard ones (intersection, complement, etc.)" href="http://www.brics.dk/automaton/" target="_blank">dk.brics.automaton</a>&nbsp;and <a title="A library for generating random text from regular expressions." href="http://code.google.com/p/xeger/" target="_blank">Xeger</a>&nbsp;packages.</p>

<p>An automatically published release created from the latest successful build can be downloaded from&nbsp;<a title="AutoFixture - Downloads" href="http://autofixture.codeplex.com/releases/view/78338" target="_blank">here</a>.&nbsp;The latest version is also live on&nbsp;<a title="AutoFixture - Package" href="http://nuget.org/List/Packages/AutoFixture" target="_blank">NuGet</a>.</p>
</div><div class="footer"><div class="author"><h4>Written by Nikos Baxevanis</h4></div><p>Programmer, building software in a broad range of sectors and technologies. Find me here: <a href="http://twitter.com/nikosbaxevanis">http://twitter.com/nikosbaxevanis</a></p></p></div><div class="dater">December 11, 2011</div><div class="categories">Published in<a class="category" href="/category/autofixture/">AutoFixture&nbsp;</a><a class="category" href="/category/regex/">Regex&nbsp;</a></div></div><div class="homer"><a href="/"><i class="icon-tape" style="font-size:32px;"></i></a></div><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-24262928-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></body></html>